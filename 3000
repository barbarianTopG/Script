local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Define Admins
local admins = {
    ["COMBO_WICK"] = true,  -- First Admin
    ["yejduhvttjdruf"] = true  -- Second Admin
}

local function generateRandomKey()
    -- Function to generate a random key
    local characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
    local keyLength = 16  -- Length of the key
    local key = ""
    for i = 1, keyLength do
        local rand = math.random(1, #characters)
        key = key .. characters:sub(rand, rand)
    end
    return key
end

-- Generate initial key
local keyRequired = generateRandomKey()
local lastKeyChangeTime = tick()  -- Start the timer for key change
local timeLimit = 20  -- Time interval (in seconds) for the key to change

local scriptURLs = {
    [18209375211] = "https://raw.githubusercontent.com/checkurasshole/Script/refs/heads/main/FireTouchIntrest%20Universal",  -- Game 1
    -- other game URLs...
}

local defaultScriptURL = "https://raw.githubusercontent.com/checkurasshole/Script/refs/heads/main/Default"
local gameId = game.PlaceId
local scriptToLoad = scriptURLs[gameId] or defaultScriptURL

-- GUI Setup
local Window = Rayfield:CreateWindow({
    Name = "ComboChronicle Vault | Game Loader",
    LoadingTitle = "Loading ComboChronicle Vault ❖",
    LoadingSubtitle = "By COMBO_WICK | Bang.E.Line",
    Theme = "Ocean"
})

-- Key and Credits Tab
local KeyTab = Window:CreateTab("Key & Credits", 4483362458)

KeyTab:CreateInput({
    Name = "Enter Key",
    PlaceholderText = "Type the key here...",
    RemoveTextAfterFocusLost = false,
    Callback = function(input)
        local playerName = game.Players.LocalPlayer.Name

        -- Check if it's an admin or if the key matches
        if admins[playerName] or input == keyRequired then
            Rayfield:Destroy() -- Close the GUI
            print("Loading script for game ID: " .. tostring(gameId))
            
            -- Load the corresponding script
            local success, err = pcall(function()
                loadstring(game:HttpGet(scriptToLoad))()
            end)
            if not success then warn("Error loading script: " .. err) end
        else
            Rayfield:Notify({
                Title = "❌ Incorrect Key",
                Content = "Join the Discord to get the correct key!",
                Duration = 5,
                Image = 4483362458
            })
        end
    end
})

-- Periodically update the key every minute
game:GetService("RunService").Heartbeat:Connect(function()
    if tick() - lastKeyChangeTime >= timeLimit then
        -- Update the key every timeLimit seconds
        keyRequired = generateRandomKey()
        lastKeyChangeTime = tick()  -- Reset the time limit timer
        print("New key generated: " .. keyRequired)
    end
end)

-- Button to copy Discord and YouTube links
KeyTab:CreateButton({
    Name = "📋 Copy Discord Link/YouTube",
    Callback = function()
        local links = "Discord: discord.com/invite/mwTHaCKzhw\nYouTube: https://www.youtube.com/@COMBO_WICK"
        setclipboard(links)
        Rayfield:Notify({
            Title = "✅ Links Copied",
            Content = "Discord and YouTube links have been copied to your clipboard!",
            Duration = 5,
            Image = 4483362458
        })
    end,
})
