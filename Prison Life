local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Window = Rayfield:CreateWindow({
    Name = "ComboChronicle Vault | Prison Life",
    Icon = 12345678901, --  diamond icon ID? 
    LoadingTitle = "Loading ComboChronicle Vault ‚ùñ",
    LoadingSubtitle = "By COMBO_WICK | Bang.E.Line",
    Theme = "Ocean"
})

-- Toggles
local aimbotEnabled = false
local autoLockEnabled = false
local trickshotMode = false

-- Variables
local espEnabled = false
local hitboxEnabled = false
local fovRadius = 100
local aimPart = "Head" -- Options: "Head", "Torso", "Random"
local smoothingFactor = 5 -- Higher = slower and smoother aiming

-- Function to apply hitbox modifications (Original)
local function adjustHitbox(character)
    if character and character:FindFirstChild("HumanoidRootPart") then
        local rootPart = character.HumanoidRootPart
        rootPart.Size = Vector3.new(9, 9, 9) -- Expand hitbox size
        rootPart.Transparency = 0.5 -- Debug visibility
        rootPart.CanCollide = false -- Disable collisions
    end
end

-- Function to monitor a player (Original)
local function monitorPlayer(player)
    -- Check if player is on the same team
    local localPlayer = game.Players.LocalPlayer
    if player.Team == localPlayer.Team then return end

    -- Apply hitbox to existing character
    if player.Character then
        adjustHitbox(player.Character)
    end

    -- Listen for respawns
    player.CharacterAdded:Connect(function(character)
        adjustHitbox(character)
    end)
end

-- Monitor all players currently in the game (Original)
for _, player in pairs(game.Players:GetPlayers()) do
    if player ~= game.Players.LocalPlayer then
        monitorPlayer(player)
    end
end

-- Monitor new players joining (Original)
game.Players.PlayerAdded:Connect(function(player)
    if player ~= game.Players.LocalPlayer then
        monitorPlayer(player)
    end
end)

-- Continuously check for any missed players or characters (Original)
task.spawn(function()
    while task.wait(1) do
        for _, player in pairs(game.Players:GetPlayers()) do
            if player ~= game.Players.LocalPlayer and player.Team ~= game.Players.LocalPlayer.Team and player.Character then
                adjustHitbox(player.Character)
            end
        end
    end
end)

-- Function to add ESP to a character based on team (Original)
local function addESP(character, isTeammate)
    if character and character:FindFirstChild("Head") then
        if not character:FindFirstChild("ESP_Highlight") then
            local highlight = Instance.new("Highlight")
            highlight.Name = "ESP_Highlight"
            highlight.Adornee = character

            -- Set colors based on whether the player is a teammate
            if isTeammate then
                highlight.FillColor = Color3.new(0, 0, 0) -- Black for teammates
            else
                highlight.FillColor = Color3.new(1, 0, 0) -- Red for opponents
            end

            highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
            highlight.Parent = character
        end
    end
end

-- Function to determine if a player is a teammate (Original)
local function isTeammate(player)
    local localPlayer = game.Players.LocalPlayer
    return player.Team == localPlayer.Team -- True if same team, false otherwise
end

-- Function to monitor a single player for ESP and Hitbox (Original)
local function monitorPlayerForESP(player)
    local localPlayer = game.Players.LocalPlayer

    -- Skip if the player is the local player
    if player == localPlayer then return end

    -- Add ESP to the current character
    if espEnabled and player.Character then
        addESP(player.Character, isTeammate(player))
    end

    -- Add ESP and hitbox when the character respawns
    player.CharacterAdded:Connect(function(character)
        if espEnabled then
            addESP(character, isTeammate(player))
        end
        if hitboxEnabled and not isTeammate(player) then
            adjustHitbox(character)
        end
    end)
end

-- Monitor all existing players for ESP and hitbox (Original)
for _, player in pairs(game.Players:GetPlayers()) do
    monitorPlayerForESP(player)
end

-- Monitor new players joining (Original)
game.Players.PlayerAdded:Connect(function(player)
    monitorPlayerForESP(player)
end)

-- Continuously check for any missed players or characters
task.spawn(function()
    while task.wait(1) do
        for _, player in pairs(game.Players:GetPlayers()) do
            if player.Character then
                addESP(player.Character, isTeammate(player))
            end
        end
    end
end)

-- Helper Functions
local function getClosestEnemyTarget()
    local localPlayer = game.Players.LocalPlayer
    local mouse = localPlayer:GetMouse()
    local closestDistance = fovRadius
    local closestPlayer = nil

    for _, player in ipairs(game.Players:GetPlayers()) do
        if player ~= localPlayer and player.Character and player.Character:FindFirstChild(aimPart) then
            local targetPart = player.Character[aimPart]

            -- Make sure it's an enemy, not a teammate (using Team-based checks)
            if player.Team ~= localPlayer.Team then
                local screenPosition, onScreen = workspace.CurrentCamera:WorldToScreenPoint(targetPart.Position)

                if onScreen then
                    local distance = (Vector2.new(screenPosition.X, screenPosition.Y) - Vector2.new(mouse.X, mouse.Y)).Magnitude
                    if distance < closestDistance then
                        closestDistance = distance
                        closestPlayer = targetPart
                    end
                end
            end
        end
    end

    return closestPlayer
end

local function aimAtTarget(target)
    if target then
        local camera = workspace.CurrentCamera
        local targetPosition = target.Position
        local currentPosition = camera.CFrame.Position

        local direction = (targetPosition - currentPosition).Unit
        local newCFrame = CFrame.new(currentPosition, currentPosition + direction)

        camera.CFrame = camera.CFrame:Lerp(newCFrame, 1 / smoothingFactor)
    end
end

-- Main Aimbot Functionality
local function aimbotLoop()
    while task.wait() do
        if aimbotEnabled then
            local target = getClosestEnemyTarget()
            aimAtTarget(target)
        end
    end
end

task.spawn(aimbotLoop)

-- Main Tab1
local mainTab = Window:CreateTab("Main", 4483362458)

local Label = mainTab:CreateLabel("NOTE: For some reason, it doesnt work good as how it should be working on some executors except solara. Trying to fix tht", 4483362458, Color3.fromRGB(255, 255, 255), false) -- Title, Icon, Color, IgnoreTheme

-- Toggle for enabling/disabling ESP (Original)
mainTab:CreateToggle({
    Name = "Enable ESP",
    CurrentValue = false, -- Default is off
    Flag = "espToggle",
    Callback = function(value)
        espEnabled = value
        if espEnabled then
            for _, player in pairs(game.Players:GetPlayers()) do
                if player.Character then
                    addESP(player.Character, isTeammate(player))
                end
            end
        else
            for _, player in pairs(game.Players:GetPlayers()) do
                if player.Character and player.Character:FindFirstChild("ESP_Highlight") then
                    player.Character.ESP_Highlight:Destroy()
                end
            end
        end
    end
})

-- Toggle for enabling/disabling Hitbox (Original)
mainTab:CreateToggle({
    Name = "Enable Hitbox",
    CurrentValue = false, -- Default is off
    Flag = "hitboxToggle",
    Callback = function(value)
        hitboxEnabled = value
        if hitboxEnabled then
            for _, player in pairs(game.Players:GetPlayers()) do
                if not isTeammate(player) and player.Character then
                    adjustHitbox(player.Character)
                end
            end
        else
            for _, player in pairs(game.Players:GetPlayers()) do
                if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local rootPart = player.Character.HumanoidRootPart
                    rootPart.Size = Vector3.new(2, 2, 1) -- Reset to default size
                    rootPart.Transparency = 0 -- Reset visibility
                    rootPart.CanCollide = true -- Enable collisions
                end
            end
        end
    end
})

-- Credits Tab
local CreditsTab = Window:CreateTab("‚ú® Credits", "info")
local CreatorSection = CreditsTab:CreateSection("üëë Creator")
CreditsTab:CreateLabel("üõ†Ô∏è COMBO_WICK - Discord: world_star_hacker")
local CoDevSection = CreditsTab:CreateSection("ü§ù Co-Developer")
CreditsTab:CreateLabel("üí° None - Discord: None")
local DiscordSection = CreditsTab:CreateSection("üåê Discord Server")
CreditsTab:CreateLabel("üîó Join our server: discord.com/invite/mwTHaCKzhw")
CreditsTab:CreateButton({
   Name = "üìã Copy Discord Link/Youtube",
   Callback = function()
      local links = "Discord: discord.com/invite/mwTHaCKzhw\nYouTube: https://www.youtube.com/@COMBO_WICK"
      setclipboard(links)
   end,
})

-- GUI Elements
local MainTab = Window:CreateTab("Aimbot+", 12345678)

MainTab:CreateToggle({
    Name = "Enable Aimbot",
    CurrentValue = false,
    Callback = function(value)
        aimbotEnabled = value
    end,
})

MainTab:CreateToggle({
    Name = "Enable Auto-Lock",
    CurrentValue = false,
    Callback = function(value)
        autoLockEnabled = value
    end,
})

MainTab:CreateToggle({
    Name = "Enable Trickshot Mode",
    CurrentValue = false,
    Callback = function(value)
        trickshotMode = value
    end,
})

MainTab:CreateSlider({
    Name = "FOV Radius",
    Min = 50,
    Max = 300,
    CurrentValue = fovRadius,
    Callback = function(value)
        fovRadius = value
    end,
})

MainTab:CreateDropdown({
    Name = "Target Bone",
    Options = {"Head", "Torso", "Random"},
    CurrentOption = aimPart,
    Callback = function(option)
        aimPart = option
    end,
})

MainTab:CreateSlider({
    Name = "Smoothing Factor",
    Min = 1,
    Max = 10,
    CurrentValue = smoothingFactor,
    Callback = function(value)
        smoothingFactor = value
    end,
})


 
