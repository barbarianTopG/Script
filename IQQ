local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local keyRequired = "YourSecretKeyHeree" -- Change this to your actual key
local scriptURLs = {
    [18209375211] = "https://raw.githubusercontent.com/checkurasshole/Script/refs/heads/main/FireTouchIntrest%20Universal",  -- Game 1
    [14518422161] = "https://raw.githubusercontent.com/checkurasshole/Script/refs/heads/main/Hitbox%20Gunfight%20Arena",  -- Game 2
    [155615604] = "https://raw.githubusercontent.com/checkurasshole/Script/refs/heads/main/Prison%20Life",  -- Game 3
    [76455837887178] = "https://raw.githubusercontent.com/checkurasshole/Script/refs/heads/main/Dig%20it(Auto-Dig%20%2B%20more%20coming)",  -- Game 4
    [7920018625] = "https://raw.githubusercontent.com/checkurasshole/Script/refs/heads/main/Nuke%20Tycoon%20Nuclear",  -- Game 5
    [15694891095] = "https://raw.githubusercontent.com/checkurasshole/Script/refs/heads/main/TheOneV1",  -- Game 6
}

local defaultScriptURL = "https://raw.githubusercontent.com/checkurasshole/Script/refs/heads/main/Default"
local gameId = game.PlaceId
local scriptToLoad = scriptURLs[gameId] or defaultScriptURL

-- IQ Test Setup
local iqQuestions = {
    { question = "What is 5 + 3?", answer = "8" },
    { question = "What is 12 - 4?", answer = "8" },
    { question = "What is 7 x 3?", answer = "21" }
}

local answeredCorrectly = false

-- GUI Setup
local Window = Rayfield:CreateWindow({
    Name = "ComboChronicle Vault | Game Loader",
    LoadingTitle = "Loading ComboChronicle Vault ‚ùñ",
    LoadingSubtitle = "By COMBO_WICK | Bang.E.Line",
    Theme = "Ocean"
})

-- IQ Test Tab
local IQTab = Window:CreateTab("IQ Test", 4483362458)

local function showIQTest()
    local correctAnswers = 0
    for _, question in ipairs(iqQuestions) do
        IQTab:CreateInput({
            Name = question.question,
            PlaceholderText = "Type your answer here...",
            RemoveTextAfterFocusLost = false,
            Callback = function(input)
                if input == question.answer then
                    correctAnswers = correctAnswers + 1
                end
            end
        })
    end
    
    IQTab:CreateButton({
        Name = "Submit Answers",
        Callback = function()
            if correctAnswers == #iqQuestions then
                answeredCorrectly = true
                Rayfield:Notify({
                    Title = "‚úÖ IQ Test Passed",
                    Content = "You passed the IQ test! Now enter the key to continue.",
                    Duration = 5,
                    Image = 4483362458
                })
                showKeyTab()
            else
                Rayfield:Notify({
                    Title = "‚ùå IQ Test Failed",
                    Content = "You failed the IQ test! Please try again later.",
                    Duration = 5,
                    Image = 4483362458
                })
            end
        end
    })
end

local function showKeyTab()
    -- Key and Credits Tab
    local KeyTab = Window:CreateTab("Key & Credits", 4483362458)

    KeyTab:CreateInput({
        Name = "Enter Key",
        PlaceholderText = "Type the key here...",
        RemoveTextAfterFocusLost = false,
        Callback = function(input)
            if input == keyRequired then
                Rayfield:Destroy() -- Close the GUI
                print("Loading script for game ID: " .. tostring(gameId))
                print("Script URL: " .. scriptToLoad)

                local success, err = pcall(function()
                    loadstring(game:HttpGet(scriptToLoad))()
                end)

                if not success then
                    warn("Error loading script: " .. err)
                end
            else
                Rayfield:Notify({
                    Title = "‚ùå Incorrect Key",
                    Content = "Join the Discord to get the correct key!",
                    Duration = 5,
                    Image = 4483362458
                })
            end
        end
    })

    KeyTab:CreateButton({
        Name = "üìã Copy Discord Link/YouTube",
        Callback = function()
            local links = "Discord: discord.com/invite/mwTHaCKzhw\nYouTube: https://www.youtube.com/@COMBO_WICK"
            setclipboard(links)
            Rayfield:Notify({
                Title = "‚úÖ Links Copied",
                Content = "Discord and YouTube links have been copied to your clipboard!",
                Duration = 5,
                Image = 4483362458
            })
        end,
    })
end

-- Show the IQ Test first
showIQTest()
